graph TB
    %% Backend Layer
    subgraph Backend["ğŸ”§ BACKEND LAYER"]
        Server["<b>Server API</b><br/>â”â”â”â”â”â”â”â”â”<br/>Port: 8000<br/>Framework: NestJS<br/>â”â”â”â”â”â”â”â”â”<br/>â€¢ Auth Middleware<br/>â€¢ Cookie Validation<br/>â€¢ REST API"]
    end

    %% Frontend Layer
    subgraph Frontend["ğŸŒ MICRO FRONTEND LAYER"]
        direction TB
        
        subgraph Row1["Host Application"]
            Home["<b>HOME</b><br/>â”â”â”â”â”â”â”â”â”<br/>Port: 3000<br/>â”â”â”â”â”â”â”â”â”<br/><b>EXPOSES:</b><br/>â€¢ Header<br/>â€¢ Footer<br/>â€¢ Products<br/>â€¢ EventBus<br/>â€¢ Styles"]
        end
        
        subgraph Row2["Remote Applications"]
            PDP["<b>PDP</b><br/>â”â”â”â”â”â”â”â”â”<br/>Port: 3001<br/>â”â”â”â”â”â”â”â”â”<br/><b>CONSUMES:</b><br/>â€¢ Home Components"]
            
            Cart["<b>CART</b><br/>â”â”â”â”â”â”â”â”â”<br/>Port: 3002<br/>â”â”â”â”â”â”â”â”â”<br/><b>EXPOSES:</b><br/>â€¢ MiniCart<br/>â€¢ Styles"]
            
            Login["<b>LOGIN</b><br/>â”â”â”â”â”â”â”â”â”<br/>Port: 3005<br/>â”â”â”â”â”â”â”â”â”<br/><b>EXPOSES:</b><br/>â€¢ Auth Hook<br/>â€¢ Shared State<br/>â€¢ RxJS Observables"]
        end
    end

    %% Communication Layer
    subgraph Communication["ğŸ“¡ COMMUNICATION LAYER"]
        direction LR
        
        EB["<b>EventBus</b><br/>â”â”â”â”â”â”â”â”â”<br/>Scope: Same Tab<br/>â”â”â”â”â”â”â”â”â”<br/>â€¢ Cart Events<br/>â€¢ Product Events<br/>â€¢ UI Sync"]
        
        BC["<b>BroadcastChannel</b><br/>â”â”â”â”â”â”â”â”â”<br/>Scope: Cross Tab<br/>â”â”â”â”â”â”â”â”â”<br/>â€¢ Auth Sync<br/>â€¢ Cart Persistence<br/>â€¢ State Sync"]
        
        RX["<b>RxJS</b><br/>â”â”â”â”â”â”â”â”â”<br/>Scope: Reactive<br/>â”â”â”â”â”â”â”â”â”<br/>â€¢ Auth State<br/>â€¢ Observables<br/>â€¢ Side Effects"]
    end

    %% Shared Layer
    subgraph Shared["ğŸ“¦ SHARED DEPENDENCIES"]
        Deps["<b>Singleton Modules</b><br/>â”â”â”â”â”â”â”â”â”<br/>â€¢ React<br/>â€¢ React-DOM<br/>â€¢ RxJS"]
    end

    %% Key Connections Only
    
    %% Backend to Frontend (API Calls)
    Server -.->|API| Home
    Server -.->|API| Cart
    Server -.->|API| Login

    %% Module Federation (Most Important)
    Home <-->|Module Federation| Cart
    Home <-->|Module Federation| Login
    Home -->|Module Federation| PDP

    %% Communication Channels (Representative)
    Home --- EB
    Cart --- EB
    
    Home --- BC
    Login --- BC
    
    Login -->|Publishes| RX
    Home -.->|Subscribes| RX

    %% Shared Dependencies (Single Reference)
    Frontend -.->|Uses| Deps

    %% Styling
    classDef backendStyle fill:#1565C0,stroke:#0D47A1,stroke-width:3px,color:#fff
    classDef hostStyle fill:#2E7D32,stroke:#1B5E20,stroke-width:3px,color:#fff
    classDef remoteStyle fill:#F57C00,stroke:#E65100,stroke-width:3px,color:#fff
    classDef commStyle fill:#6A1B9A,stroke:#4A148C,stroke-width:3px,color:#fff
    classDef sharedStyle fill:#00695C,stroke:#004D40,stroke-width:3px,color:#fff
    classDef layerStyle fill:#F5F5F5,stroke:#9E9E9E,stroke-width:2px,stroke-dasharray: 5 5
    
    class Server backendStyle
    class Home hostStyle
    class PDP,Cart,Login remoteStyle
    class EB,BC,RX commStyle
    class Deps sharedStyle
    class Backend,Frontend,Communication,Shared layerStyle